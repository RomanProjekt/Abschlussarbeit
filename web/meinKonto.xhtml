<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Mein Konto</title>
        <h:outputStylesheet library= "css" name= "Navbar.css" />
        <h:outputStylesheet library= "css" name= "meinKonto.css" />
    </h:head>
    <f:metadata>
        <f:viewAction action="#{databaseManagerService.stillLoggedIn()}" />
        <f:viewAction action="#{meinKontoBean.init()}" />
    </f:metadata>
    <h:body>
        <ui:include src="/resources/include/navbar.xhtml" />
        <ui:include src="/resources/include/footer.xhtml" />

        <f:view>
            <div class="meinKonto" >

                <h2>Mein Konto</h2>
                <div class="userdata">
                    <b:form>
                        <b:panelGrid columns="2"  styleClass="panelGrid" >

                            <h:outputLabel class="lable" value="Vorname" />
                            <h:outputLabel class="data" value="#{databaseManagerService.loggedInBenutzer.firstname}" />

                            <h:outputLabel class="lable" value="Nachname" />
                            <h:outputLabel class="data" value="#{databaseManagerService.loggedInBenutzer.lastname}" />

                            <h:outputLabel class="lable" value="Benutzername" />
                            <h:outputLabel class="data" value="#{databaseManagerService.loggedInBenutzer.username}" />

                            <h:outputLabel class="lable" value="E-Mail" />
                            <h:outputLabel class="data" value="#{databaseManagerService.loggedInBenutzer.geteMail()}" />

                        </b:panelGrid>
                        <!--                        <b:commandButton value="Nutzerdaten Ändern" />-->
                    </b:form>
                </div>
                <b:form>
                    <div class="favoriten" >
                        <h3>Ihre Favoriten</h3>
                        <b:dataTable   value="#{meinKontoBean.favList}" id="favTable" var="diplomarbeit" class="favoritenTable"  rendered="#{!meinKontoBean.favIsEmpty()}">
                            <b:dataTableColumn label="Logo" >
                                <h:graphicImage value="#{diplomarbeit.bild}" height="50px" width="50px" />
                            </b:dataTableColumn>
                            <b:dataTableColumn label="Titel">
                                <h:outputText value="#{diplomarbeit.title}" />
                            </b:dataTableColumn>

                            <b:dataTableColumn label="">
                                <b:commandButton value="Ansehen" action="#{dipansehenBean.werteanzeigen(diplomarbeit)}" />
                            </b:dataTableColumn>
                            <b:dataTableColumn label="">
                                <b:commandButton value="Löschen" action="#{meinKontoBean.deletefav(diplomarbeit)}" > 
                                    <f:ajax render="@form"  />
                                </b:commandButton>

                            </b:dataTableColumn>
                        </b:dataTable>
                        <h:outputLabel rendered="#{meinKontoBean.favIsEmpty()}">Sie haben noch keine Favoriten hinzugefügt</h:outputLabel>
                    </div>
                </b:form>
                <br />

                <b:form rendered="#{!databaseManagerService.isUser()}">
                    <div class="uploadedDA">
                        <h3>Ihre hochgeladenen Diplomarbeiten</h3>

                        <b:dataTable value="#{meinKontoBean.redList}" var="diplomarbeit"  >
                            <b:dataTableColumn label="Logo" >
                                <h:graphicImage value="#{diplomarbeit.bild}" height="50px" width="50px" />
                            </b:dataTableColumn>

                            <b:dataTableColumn label="Titel">
                                <h:outputText value="#{diplomarbeit.title}" />
                            </b:dataTableColumn>
                            <b:dataTableColumn label="">
                                <b:commandButton value="Ansehen" action="#{dipansehenBean.werteanzeigen(diplomarbeit)}" />
                            </b:dataTableColumn>
                            <b:dataTableColumn label="" >
                                <b:commandButton value="Daten Ändern" action="#{updateDiplomarbeit.editDiplomarbeit(diplomarbeit)}"/>
                            </b:dataTableColumn>

                            <b:dataTableColumn label="">
                                <b:commandButton value="Löschen" action="#{meinKontoBean.delteDip(diplomarbeit)}" >
                                    <f:ajax render="@form"  />
                                </b:commandButton>

                            </b:dataTableColumn>

                        </b:dataTable>
                    </div>
                </b:form>

            </div>
        </f:view>
    </h:body>
</html>

